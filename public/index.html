<script>
  window.addEventListener('load', () => {
    const faviconSelector = "link[rel~='icon']";
    const favicon = document.querySelector(faviconSelector);

    console.groupCollapsed("üîç Favicon Debugging");

    if (!favicon) {
      console.warn("‚ö†Ô∏è No favicon link tag found with selector:", faviconSelector);
      console.info("üí° Ensure you have this in your <head>:");
      console.log(`<link rel="icon" href="/favicon.ico" type="image/x-icon" />`);
      console.groupEnd();
      return;
    }

    console.log("‚úÖ Favicon link element found:", favicon.outerHTML);
    const faviconURL = favicon.href;

    // Try loading the favicon
    const testImg = new Image();
    testImg.src = faviconURL;

    testImg.onload = () => {
      console.log("üü¢ Favicon image loaded successfully:", faviconURL);
      console.groupEnd();
    };

    testImg.onerror = () => {
      console.error("üî¥ Favicon failed to load:", faviconURL);
      console.info("üîÅ Attempting direct fetch for more info...");

      // Fallback: Try fetching it manually to inspect error
      fetch(faviconURL)
        .then(res => {
          if (!res.ok) {
            console.error("‚ùå Favicon fetch failed with status:", res.status);
          } else {
            console.log("‚úÖ Favicon fetch returned status:", res.status);
          }
          console.groupEnd();
        })
        .catch(err => {
          console.error("‚ùå Favicon fetch threw an error:", err);
          console.groupEnd();
        });
    };
  });
</script>
